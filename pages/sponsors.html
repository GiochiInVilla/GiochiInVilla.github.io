<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="../../generalCSS/style.css">
	<link rel="stylesheet" href="../../generalCSS/button.css">
	<link rel="stylesheet" href="../../generalCSS/header.css">
	<link rel="stylesheet" href="../../fonts/fonts.css">
	<link rel="stylesheet" href="../../cards/cards.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	
</head>
<body>
	<!-- Overheader -->
	<div class="overheader"><div style="font-family: Avenge; letter-spacing: 1px; font-size: 30px;">Giochi in Villa</div></div>
	<br>

	<!-- Header -->
	<div class="header">
	  <img src="../images/technical/header.png" style="width: 90%; max-width: 1000px;"></img>
	</div>

	<div class="topnav">
	  <a href="../index.html">Home</a>
	  <a href="../pages/events.html">Eventi</a>
	  <a href="../pages/sponsors.html" style="float:right">Sponsors</a>
	</div>

	<div class="row">
		<!-- Left Column -->
		<div class="leftcolumn">
	 
			<div id="insertionPoint"></div>
			
			<p>
				Number of loaded HTML files: <span id="number">0</span><br>
				<a href="#" id="decreaseLink">Link 1</a>
				<a href="#" id="increaseLink">Link 2</a>
			</p>
		
		<!-- End Left Column -->
		</div>
		
		<!-- Right Column -->
		<div class="rightcolumn">
			<div loadHTML="../cards/technical/presentation.html"></div>
			<div loadHTML="../cards/technical/socials.html"></div>
		</div>
	</div>

	<script type="text/javascript" src="../../HTMLloader.js"></script>
	
	<script>
        // Function to load HTML files based on the input number and insert them at a specific location
        function loadHTMLFiles(number, insertionPoint) {
            const container = document.createElement('div');
            
            for (let i = 1; i <= 3; i++) {
                const div = document.createElement('div');
                div.setAttribute('loadHTML', `../cards/articles/article${(number*3)+i}.html`);
                container.appendChild(div);
            }

            // Find the specific element with the provided ID
            const targetElement = document.getElementById(insertionPoint);
            if (targetElement) {
                targetElement.appendChild(container);
            }
        }

        // Get the input number from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const number = parseInt(urlParams.get('number'));

        if (!isNaN(number)) {
            loadHTMLFiles(number, 'insertionPoint');
        } else {
            loadHTMLFiles(0, 'insertionPoint');
        }
    </script>
	
	<script>
		function loadEvents() {			
			includeHTML();
		}
		loadEvents();
	</script>
	
	
        <script>
        // Function to check if a specific file exists and disable links
        function checkAndDisableLinks(number) {
            const maxAllowedLinks = number * 3 + 4; // Calculate the maximum allowed links
            const links = document.querySelectorAll('a'); // Get all links on the page

            const filename = `article${number * 3 + 4}.html`; // Construct the filename
            const fileURL = `../cards/articles/${filename}`; // Construct the file URL

            // Use fetch to check if the file exists
            fetch(fileURL)
                .then(response => {
                    if (response.status === 200) {
                        // The file exists, proceed
                        return response.text();
                    } else {
                        // The file does not exist, handle as needed
                        throw new Error('File not found');
                    }
                })
                .then(data => {
                    // Update the number of loaded HTML files
                    document.getElementById('number').textContent = number;

                    // Disable or enable links based on the conditions
                    links[0].disabled = number === 0; // Disable Link 1 if number is 0
                    links[1].disabled = number * 3 + 1 >= maxAllowedLinks; // Disable Link 2 if conditions are not met
                })
                .catch(error => {
                    // Handle the error (e.g., file not found)
                    console.error('Fetch error:', error);
                });
        }

        // Call the function with the initial number
        checkAndDisableLinks(number);
    </script>
</body>
</html>